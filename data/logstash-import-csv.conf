input {
    file {
        path => "/Users/scottmcallister/Projects/Java/dreadflicks/data/new-movies.csv"
        start_position => "beginning"
        sincedb_path => "/dev/null"
    }
}

filter {
    csv {
        columns => ["id","title","director","year","country","criticScore","userScore","poster","rtUrl","imdbRating","imdbKeywords","image"]
        separator => ","
    }
    mutate {
        convert => {
            "id" => "integer"
            "year" => "integer"
            "criticScore" => "integer"
            "userScore" => "integer"
            "imdbRating" => "float"
        }
    }
}

output {
    elasticsearch {
        hosts => ["cedar-4930421.us-east-1.bonsaisearch.net:443"]
        user => "rzcoej0t"
        password => "zm8n1a7gczldvm8x"
        ssl => true
        index => "movie"
        document_type => "movie"
        document_id => "%{id}"
    }
    stdout {}
}
